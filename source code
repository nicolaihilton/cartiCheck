package webtest;

import java.io.IOException;
import java.util.Timer;
import java.util.TimerTask;
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;

public class CartiCheck extends TimerTask{

	private int counter = 0;
	public CartiCheck(){
		Timer timer = new Timer();
		timer.scheduleAtFixedRate(repeatedTask, 0, 5000);
	}
	
    public static void main(String[] args){ 
    	new CartiCheck();
    }

	TimerTask repeatedTask = new TimerTask() {
		
		@Override
		public void run() {
			Document docGoogle;
			try {
				docGoogle = Jsoup.connect("https://www.google.com/search?q=playboi+carti+latest+release&oq=playboi+carti+latest+release&aqs=chrome..69i57j33l2.13645j1j9&sourceid=chrome&ie=UTF-8").get();
		        String latestGoogle = docGoogle.select(".srp.tbo.vasq").select(".Z0LcW").text();
		        counter++;
		        if(latestGoogle.equals("Die Lit")) {
		        	System.out.println("Latest album on Google: \n" + latestGoogle + " -> no new album.");
		        }
		        else {
					System.out.println("New Carti album: " + latestGoogle);
				}
		        System.out.println("refreshed " + counter);
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			
		}
	};

	@Override
	public void run() {
		// TODO Auto-generated method stub
		
	}

}
